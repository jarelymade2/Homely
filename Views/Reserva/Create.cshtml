@model StayGo.Models.Reserva
@using System.Globalization

@{
    ViewData["Title"] = "Confirmar reserva";
    var pe = new CultureInfo("es-PE");
    var prop = ViewBag.Propiedad as StayGo.Models.Propiedad;
    int noches = (Model.CheckOut.ToDateTime(TimeOnly.MinValue) - Model.CheckIn.ToDateTime(TimeOnly.MinValue)).Days;
}

<div class="container py-4">
    <h3>Confirmar reserva</h3>

    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title">@prop?.Titulo</h5>
            <p class="card-text">@prop?.Direccion?.Ciudad, @prop?.Direccion?.Pais</p>
            <p class="mb-1"><strong>Fechas:</strong> @Model.CheckIn.ToString("yyyy-MM-dd") — @Model.CheckOut.ToString("yyyy-MM-dd") (@noches noche(s))</p>
            <p class="mb-1"><strong>Huéspedes:</strong> @Model.Huespedes</p>
            <p class="mb-1"><strong>Precio total:</strong> @Model.PrecioTotal.ToString("C", pe)</p>
        </div>
    </div>

    <form asp-action="Create" method="post">
        <input type="hidden" asp-for="PropiedadId" />
        <input type="hidden" asp-for="CheckIn" />
        <input type="hidden" asp-for="CheckOut" />
        <input type="hidden" asp-for="Huespedes" />
        <input type="hidden" asp-for="PrecioTotal" />

        <div class="mb-3">
            <button type="submit" class="btn btn-primary">Confirmar reserva</button>
            <a asp-controller="Propiedad" asp-action="Details" asp-route-id="@Model.PropiedadId" class="btn btn-outline-secondary">Cancelar</a>
        </div>
    </form>
</div>
