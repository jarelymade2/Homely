@model StayGo.Models.ContactoMensaje
@{
    ViewData["Title"] = "Contacto";
    var isAuth = User?.Identity?.IsAuthenticated == true;
}

<div class="container py-4">
    <h1 class="mb-3">Contáctanos</h1>

    @if (TempData["ok"] is string ok)
    {
        <div class="alert alert-success">@ok</div>
    }

    <form asp-action="Index" method="post" class="row g-3 card card-body shadow-sm">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>

        @* Si está autenticado, el Email/Nombre pueden venir prellenados *@
        <div class="col-md-6">
            <label asp-for="Nombre" class="form-label"></label>
            <input asp-for="Nombre" class="form-control" />
            <span asp-validation-for="Nombre" class="text-danger"></span>
        </div>

        <div class="col-md-6">
            <label asp-for="Email" class="form-label"></label>
            <input asp-for="Email" class="form-control" />
            <span asp-validation-for="Email" class="text-danger"></span>
        </div>

        <div class="col-12">
            <label asp-for="Mensaje" class="form-label"></label>
            <textarea asp-for="Mensaje" rows="5" class="form-control"></textarea>
            <span asp-validation-for="Mensaje" class="text-danger"></span>
        </div>

        @* Guarda los vínculos si ya vienen prellenados *@
        @if (isAuth)
        {
            <input type="hidden" asp-for="IdentityUserId" />
            <input type="hidden" asp-for="UsuarioId" />
        }

        <div class="col-12">
            <button class="btn btn-primary" type="submit">Enviar</button>
        </div>
    </form>
</div>

@section Scripts { <partial name="_ValidationScriptsPartial" /> }
